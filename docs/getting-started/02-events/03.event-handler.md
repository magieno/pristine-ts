<p>
   <strong>Previous section: </strong> <a href="02.event-mapper.md">Event Mapper</a>
</p>


Event Handler
-------

The **Event Handler** is where your business logic lives. Once an event has been intercepted and mapped, it arrives here.

Every action in Pristine eventually maps to an `EventHandler`.

*   **HTTP Requests:** Mapped to a `Router` which dispatches to a **Controller**. In Pristine, Controllers are essentially specialized Event Handlers for HTTP.
*   **Queue Messages:** Dispatched to a specific class you define to handle that message type.
*   **CLI Commands:** Dispatched to a command handler.

### The Contract

An Event Handler must implement the `EventHandlerInterface`. It receives an `Event` and must return a `Promise<EventResponse>`.

```typescript
import { EventHandlerInterface, Event, EventResponse, ServiceDefinitionTagEnum, tag } from "@pristine-ts/core";
import { injectable } from "tsyringe";

@tag(ServiceDefinitionTagEnum.EventHandler)
@injectable()
export class MyCustomHandler implements EventHandlerInterface {
    
    async handle(event: Event): Promise<EventResponse> {
        // Your business logic here
        const data = event.payload;

        return new EventResponse(event, { 
            message: "Successfully processed", 
            result: data 
        });
    }
}
```

### Routing

How does Pristine know which handler to use?
The `Kernel` uses the `Event.type` property (assigned by the Mapper) to determine which handler is registered for that specific event type.

---

<p align="right">
   <strong>Next section: </strong> <a href="04.event-listener.md">Event Listener</a>
</p>
